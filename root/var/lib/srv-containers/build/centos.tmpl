FROM docker.io/centos:@tag@

LABEL description="base centos @tag@" maintainer="Pierre Dorgueil <pierre.dorgueil@gmail.com>"

# install addon software, enable system services, set passwords to 'centos', make app-adm sudoer
RUN sed -i -e '/tsflags=nodocs/s/^/#/' /etc/dnf/dnf.conf; \
    yum install -y \
      NetworkManager \
      bash-completion \
      bind-utils \
      cockpit \
      man-db \
      man-pages \
      mlocate \
      ncurses \
      net-tools \
      nmap \
      openssh-server \
      passwd \
      sudo \
      vim \
      wget \
      which \
      ; \
    yum reinstall -y bash; \
    yum clean all; \
    for u in cockpit.socket NetworkManager sshd; do systemctl enable $u; done; \
    for u in getty.target console-getty.service getty@tty1.service; do systemctl mask $u; done; \
