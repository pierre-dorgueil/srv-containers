FROM docker.io/opensuse/@tag@

LABEL description="base OpenSUSE @tag@" maintainer="Pierre Dorgueil <pierre.dorgueil@gmail.com>"

# install addon software, enable system services, set passwords to 'suse', app-adm is auto sudoer
RUN sed -i 's/^\(rpm.install.excludedocs.*\)/# \1/' /etc/zypp/zypp.conf; \
    zypper install -y \
      NetworkManager \
      bash-doc \
      bind-utils \
      curl \
      less \
      man \
      man-pages \
      mlocate \
      ncat \
      net-tools \
      net-tools-deprecated \
      nmap \
      openssh \
      sudo \
      systemd-sysvinit \
      vim \
      wget \
      which \
      yast2 \
      ;\
    zypper install -y --force bash; \
    zypper clean; \
    for s in NetworkManager sshd; do systemctl enable $s; done; \
    for u in getty.target console-getty.service getty@tty1.service; do systemctl mask $u; done; \
    ln -s /usr/bin/ncat /usr/bin/nc; \
